<h1>üìä –†–∞—Å—Ö–æ–¥—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º</h1>

<%= turbo_frame_tag "grouped_transactions" do %>
  <table class="category-table">
    <thead>
    <tr>
      <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
      <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
      <th>–°—É–º–º–∞</th>
    </tr>
    </thead>
    <tbody>
    <% total_sum = 0 %>
    <% @grouped.each do |category, transactions| %>
      <% subtotal = transactions.sum(&:amount) %>
      <% total_sum += subtotal %>

      <tr class="category-header">
        <td colspan="3"><strong><%= category %></strong> ‚Äî <%= number_to_currency(subtotal, unit: "‚ÇΩ") %></td>
      </tr>

      <% transactions.each do |t| %>
        <tr class="transaction-row">
          <td></td>
          <td><%= t.description %></td>
          <td><%= number_to_currency(t.amount, unit: "‚ÇΩ") %></td>
        </tr>
      <% end %>
    <% end %>

    <tr class="total-row">
      <td colspan="2"><strong>–ò—Ç–æ–≥–æ:</strong></td>
      <td><strong><%= number_to_currency(total_sum, unit: "‚ÇΩ") %></strong></td>
    </tr>
    </tbody>
  </table>
<% end %>
<%= link_to "–í–µ—Ä–Ω—É—Ç—å—Å—è", root_path %>
